(this.webpackJsonpmoney=this.webpackJsonpmoney||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),o=n.n(c),s=(n(45),n(25)),i=(n(46),n(47),n(48),n(2)),l=n(3);function d(){return Object(l.jsxs)("div",{className:"app_wrapper",children:[Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:"\ud83d\udcb6 Money"}),Object(l.jsx)("a",{href:"https://github.com/thomasrosen/money",target:"_blank",rel:"noreferrer",children:"Sourcecode"})]}),Object(l.jsxs)("main",{children:[Object(l.jsxs)("div",{className:"middle_box",children:[Object(l.jsx)("p",{children:Object(l.jsx)("strong",{children:"A very simple tool to keep track of some of your spendings."})}),Object(l.jsxs)("p",{children:["The text recognition is handled on the server. But nothing is permanently stored there. All data is only on here in this browser on your computer. You can ",Object(l.jsx)("strong",{children:"export and import"})," the data to backup or move it to a different browser."]}),Object(l.jsxs)("p",{children:["The website is maintained by ",Object(l.jsx)("a",{href:"https://thomasrosen.me/",target:"_blank",rel:"noreferrer",children:"Thomas Rosen"}),". You can contact me at ",Object(l.jsx)("a",{href:"mailto:money@thomasrosen.me",children:"money@thomasrosen.me"}),"."]})]}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)(i.a,{})]})]})}var u=n(4),j=n(8),h=n(5),b=n(12),p=n(40),g={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",width:"100%",transition:"box-shadow .2s ease, background-color .2s ease"},m={boxShadow:"0 0 0 5px var(--primary-color)"},O={boxShadow:"0 0 0 5px var(--primary-color)"},x={backgroundColor:"var(--error-color)",boxShadow:"0 0 0 5px var(--error-color)"};var f=function(e){var t=e.onChange,n=Object(p.a)({accept:{"image/*":[".jpeg",".png"]},onDrop:t}),r=n.getRootProps,c=n.getInputProps,o=n.isFocused,s=n.isDragAccept,i=n.isDragReject,d=Object(a.useMemo)((function(){return Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},g),o?m:{}),s?O:{}),i?x:{})}),[o,s,i]);return Object(l.jsx)("section",{className:"container",children:Object(l.jsxs)("button",Object(b.a)(Object(b.a)({className:"primary"},r({style:d})),{},{children:[Object(l.jsx)("input",Object(b.a)({},c())),i?Object(l.jsx)("strong",{children:"Only JPG and PNG images are allowed!"}):Object(l.jsx)("strong",{children:"Click or Drop an image here!"})]}))})},w={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:"16px"},y={border:"1px solid #eaeaea",marginBottom:"8px",marginRight:"8px",width:"auto",height:"100px",padding:"4px"},v={display:"block",width:"auto",height:"100%"};function S(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(h.a)(c,2),s=o[0],i=o[1],d=Object(a.useCallback)((function(e){e=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})),r(e)}),[]),b=Object(a.useCallback)(Object(j.a)(Object(u.a)().mark((function e(){var t,a,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}throw new Error("No files selected");case 2:return t=n[0],console.log("file",t),e.next=6,fetch("".concat(window.urls.api,"ocr"),{method:"POST",body:t});case 6:return a=e.sent,e.next=9,a.json();case 9:r=e.sent,i(r);case 11:case"end":return e.stop()}}),e)}))),[n]);return Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"middle_box",children:[Object(l.jsx)(f,{onChange:d}),Object(l.jsx)("br",{}),n.length>0?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h4",{children:"Selected Images"}),Object(l.jsx)("aside",{style:w,children:n.map((function(e){return Object(l.jsx)("div",{style:y,children:Object(l.jsx)("img",{alt:"".concat(e.path," - ").concat(e.size," bytes"),title:"".concat(e.path," - ").concat(e.size," bytes"),src:e.preview,style:v,onLoad:function(){URL.revokeObjectURL(e.preview)}})},e.name)}))}),Object(l.jsx)("button",{onClick:b,children:"Send one file"})]}):null,null!==s?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)("pre",{children:Object(l.jsx)("code",{children:JSON.stringify(s,null,2)})})]}):null]})})}var T=Object(s.a)([{path:"/",element:Object(l.jsx)(d,{}),children:[{path:"/",element:Object(l.jsx)(S,{})},{path:"*",element:Object(l.jsx)(S,{})}]}]),R=n(39),L=n(16),k=n(10);function P(e){var t=new URL(window.location),n=t.searchParams.toString(),a=new URLSearchParams([].concat(Object(k.a)(Array.from(t.searchParams.entries()).filter((function(t){var n=Object(h.a)(t,1)[0];return!e.has(n)}))),Object(k.a)(Object(k.a)(e.entries()).filter((function(e){var t=Object(h.a)(e,2)[1];return String(t).length>0})))).sort((function(e,t){var n=Object(h.a)(e,1)[0],a=Object(h.a)(t,1)[0];return n.localeCompare(a)}))).toString();n!==a&&(t=new URL("".concat(t.origin).concat(t.pathname).concat(a.length>0?"?"+a:"")),window.history.pushState({},"",t))}var U=Object(L.c)({name:"filter",initialState:{tags:[],selectedTags:[],queryText:"",latitude:0,longitude:0},reducers:{setTags:function(e,t){e.tags=t.payload},setSelectedTags:function(e,t){e.selectedTags=t.payload},toggleTag:function(e,t){e.selectedTags.includes(t.payload)?e.selectedTags=e.selectedTags.filter((function(e){return e!==t.payload})):e.selectedTags.push(t.payload),e.selectedTags=e.selectedTags.filter(Boolean),0===e.selectedTags.length?P(new URLSearchParams([["tags",""]])):P(new URLSearchParams([["tags",e.selectedTags.join(",")]]))},setQueryText:function(e,t){e.queryText=t.payload,0===e.queryText.length?P(new URLSearchParams([["q",""]])):P(new URLSearchParams([["q",e.queryText]]))},setGeoLocation:function(e,t){e.latitude=t.payload.latitude,e.longitude=t.payload.longitude,P(new URLSearchParams([["lat",e.latitude],["lon",e.longitude]]))},clearGeoLocation:function(e){e.latitude=null,e.longitude=null,P(new URLSearchParams([["lat",""],["lon",""]]))}}}),q=U.actions,C=(q.setTags,q.setSelectedTags,q.toggleTag,q.setQueryText,q.setGeoLocation,q.clearGeoLocation,U.reducer),N=Object(L.c)({name:"resources",initialState:{resources:[]},reducers:{setResources:function(e,t){e.resources=t.payload}}}),A=N.actions.setResources,B=(Object(L.b)("resources/fetchResources",function(){var e=Object(j.a)(Object(u.a)().mark((function e(t,n){var a,r,c,o,s,i,l,d,j,h,b,p,g,m;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("fetchResources"),r=(a=n||{}).dispatch,c=a.getState,o=c(),s=o.filter,l=(i=s||{}).latitude,d=i.longitude,j=i.selectedTags,h=i.queryText,b={},null!==l&&String(l).length>0&&null!==d&&String(d).length>0&&(b.lat=l,b.lon=d),p=j.filter(Boolean),Array.isArray(p)&&p.length>0&&(b.tags=p.join(",")),"string"===typeof h&&h.length>0&&(b.q=h),g=new URLSearchParams(b).toString(),m="".concat(window.urls.api,"resources.json").concat(g.length>0?"?"+g:""),console.log("url",m),fetch(m).then((function(e){return e.json()})).then((function(e){console.log("data",e),r(A(e.resources))}));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),N.reducer),D=Object(L.a)({reducer:{filter:C,resources:B}}),G=Boolean("0.0.0.0"===window.location.hostname||"localhost"===window.location.hostname||"[::1]"===window.location.hostname);if(window.env=!0===G?"dev":"prod",window.urls={frontend:"https://money.thomasrosen.me/",api:"https://money.thomasrosen.me/api/"},"dev"===window.env){var _="localhost";window.urls.frontend="http://".concat(_,":3000/"),window.urls.api="http://".concat(_,":13151/api/")}o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(R.a,{store:D,children:Object(l.jsx)(i.c,{router:T,fallbackElement:"Loading\u2026"})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.48355738.chunk.js.map