{"version":3,"sources":["components/App.js","components/pages/welcome.js","components/router.js","redux/slices/filterSlice.js","redux/slices/resourcesSlice.js","redux/store.js","index.js"],"names":["App","_jsxs","className","children","_jsx","href","target","rel","Outlet","Welcome","router","createHashRouter","path","element","pushReplaceSearchParams","new_searchParams","url","URL","window","location","old_search_params_string","searchParams","toString","new_search_params_string","URLSearchParams","concat","_toConsumableArray","Array","from","entries","filter","_ref","key","_slicedToArray","has","_ref3","value","String","length","sort","_ref5","_ref6","key_a","key_b","localeCompare","origin","pathname","history","pushState","filterSlice","createSlice","name","initialState","tags","selectedTags","queryText","latitude","longitude","reducers","setTags","state","action","payload","setSelectedTags","toggleTag","includes","tag","push","Boolean","join","setQueryText","setGeoLocation","clearGeoLocation","_filterSlice$actions","actions","resourcesSlice","resources","setResources","createAsyncThunk","_asyncToGenerator","_regeneratorRuntime","mark","_callee","thunkApi","_ref2","dispatch","getState","_getState","search_params_data","filtered_selectedTags","search_params","wrap","_context","prev","next","console","log","lat","lon","isArray","q","urls","api","fetch","then","response","json","data","stop","_x","_x2","apply","arguments","configureStore","reducer","filterReducer","resourcesReducer","isLocalhost","hostname","env","frontend","dev_domain","ReactDOM","render","React","StrictMode","ReduxProvider","store","RouterProvider","fallbackElement","document","getElementById"],"mappings":"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","file":"static/js/main.d1bf5885.chunk.js","sourcesContent":["import React from 'react'\nimport './App.css'\n\nimport '../fonts/ubuntu-v15-latin/index.css'\nimport '../fonts/ubuntu-mono-v10-latin/index.css'\n\nimport {\n  Outlet,\n} from 'react-router-dom'\n\nexport default function App() {\n\n  return <div className={`app_wrapper`}>\n    <header>\n      <h1>üè≥Ô∏è‚Äçüåà QR</h1>\n\n      <a href=\"https://github.com/thomasrosen/money\" target=\"_blank\" rel=\"noreferrer\">Sourcecode</a>\n    </header>\n\n    <main>\n      <h1>üè≥Ô∏è‚Äçüåà Queer Resources</h1>\n\n      <br />\n\n      <p>A collection of resources for queer people. You're of course also welcome to look through the information if you are an ally.</p>\n\n      <p>You can filter the links via your location and some tags.</p>\n\n      <p>\n        The website is maintained by <a href=\"https://thomasrosen.me/\" target=\"_blank\" rel=\"noreferrer\">Thomas Rosen</a>.<br />\n        Send an email to <a href=\"mailto:money@thomasrosen.me\">money@thomasrosen.me</a> if you want to add a resource.\n      </p>\n\n      <br />\n      <br />\n\n      <Outlet />\n    </main>\n\n  </div>\n}\n","export default function Welcome() {\n  return <div>\n      \n  </div>\n}\n","import {\n  createHashRouter,\n} from 'react-router-dom'\n\nimport App from './App.js'\nimport Welcome from './pages/welcome.js'\n\nexport const router = createHashRouter([\n  {\n    path: '/',\n    element: <App />,\n    children: [\n      {\n        path: '/',\n        element: <Welcome />,\n      },\n      {\n        path: '*',\n        element: <Welcome />,\n      },\n    ]\n  },\n]);\n","import { createSlice } from '@reduxjs/toolkit'\n\nfunction pushReplaceSearchParams(new_searchParams) {\n  let url = new URL(window.location)\n\n  const old_search_params_string = url.searchParams.toString()\n\n  const new_search_params_string = new URLSearchParams(\n    [\n      ...(\n        Array.from(url.searchParams.entries())\n          .filter(([key]) => !new_searchParams.has(key))\n      ),\n      ...(\n        [...new_searchParams.entries()]\n          .filter(([, value]) => String(value).length > 0)\n      ),\n    ]\n      .sort(([key_a], [key_b]) => key_a.localeCompare(key_b)) // sort alphabetically\n  ).toString()\n\n  if (old_search_params_string !== new_search_params_string) {\n    url = new URL(`${url.origin}${url.pathname}${new_search_params_string.length > 0 ? '?' + new_search_params_string : ''}`)\n    window.history.pushState({}, '', url)\n  }\n}\n\nexport const filterSlice = createSlice({\n  name: 'filter',\n  initialState: {\n    tags: [],\n    selectedTags: [],\n    queryText: '',\n    latitude: 0,\n    longitude: 0,\n  },\n  reducers: {\n    setTags: (state, action) => {\n      state.tags = action.payload\n    },\n    setSelectedTags: (state, action) => {\n      state.selectedTags = action.payload\n    },\n    toggleTag: (state, action) => {\n      if (state.selectedTags.includes(action.payload)) {\n        state.selectedTags = state.selectedTags.filter(tag => tag !== action.payload)\n      } else {\n        state.selectedTags.push(action.payload)\n      }\n\n      state.selectedTags = state.selectedTags.filter(Boolean)\n\n      if (state.selectedTags.length === 0) {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['tags', ''],\n        ]))\n      } else {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['tags', state.selectedTags.join(',')],\n        ]))\n      }\n    },\n    setQueryText: (state, action) => {\n      state.queryText = action.payload\n\n      if (state.queryText.length === 0) {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['q', ''],\n        ]))\n      } else {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['q', state.queryText],\n        ]))\n      }\n    },\n    setGeoLocation: (state, action) => {\n      state.latitude = action.payload.latitude\n      state.longitude = action.payload.longitude\n\n      pushReplaceSearchParams(new URLSearchParams([\n        ['lat', state.latitude],\n        ['lon', state.longitude],\n      ]))\n    },\n    clearGeoLocation: (state) => {\n      state.latitude = null\n      state.longitude = null\n\n      pushReplaceSearchParams(new URLSearchParams([\n        ['lat', ''],\n        ['lon', ''],\n      ]))\n    }\n  }\n})\n\nexport const {\n  setTags,\n  setSelectedTags,\n  toggleTag,\n  setQueryText,\n  setGeoLocation,\n  clearGeoLocation,\n} = filterSlice.actions\n\nexport const selectTags = state => state.filter.tags\nexport const selectSelectedTags = state => state.filter.selectedTags.filter(Boolean)\nexport const selectQueryText = state => state.filter.queryText\nexport const selectGeoLocation = state => ({\n  latitude: state.filter.latitude,\n  longitude: state.filter.longitude,\n})\n\nexport default filterSlice.reducer\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\n\nexport const resourcesSlice = createSlice({\n  name: 'resources',\n  initialState: {\n    resources: [],\n  },\n  reducers: {\n    setResources: (state, action) => {\n      state.resources = action.payload\n    },\n  }\n})\n\nexport const {\n  setResources,\n} = resourcesSlice.actions\n\nexport const fetchResources = createAsyncThunk('resources/fetchResources', async (value, thunkApi) => {\n  console.log('fetchResources')\n  const {\n    dispatch,\n    getState,\n  } = thunkApi || {}\n\n  const { filter } = getState()\n\n  const {\n    latitude,\n    longitude,\n    selectedTags,\n    queryText,\n  } = filter || {}\n\n  const search_params_data = {}\n\n  if (\n    latitude !== null && String(latitude).length > 0\n    && longitude !== null && String(longitude).length > 0\n  ) {\n    search_params_data.lat = latitude\n    search_params_data.lon = longitude\n  }\n\n  const filtered_selectedTags = selectedTags.filter(Boolean)\n  if (Array.isArray(filtered_selectedTags) && filtered_selectedTags.length > 0) {\n    search_params_data.tags = filtered_selectedTags.join(',')\n  }\n\n  if (typeof queryText === 'string' && queryText.length > 0) {\n    search_params_data.q = queryText\n  }\n\n  const search_params = new URLSearchParams(search_params_data).toString()\n\n  const url = `${window.urls.api}resources.json${search_params.length > 0 ? '?' + search_params : ''}`;\n\n  console.log('url', url)\n\n  fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      console.log('data', data)\n      dispatch(setResources(data.resources))\n    })\n})\n\nexport const selectResources = state => state.resources.resources\n\nexport default resourcesSlice.reducer\n","import { configureStore } from '@reduxjs/toolkit'\nimport filterReducer from './slices/filterSlice.js'\nimport resourcesReducer from './slices/resourcesSlice.js'\n\nexport default configureStore({\n  reducer: {\n    filter: filterReducer,\n    resources: resourcesReducer,\n  }\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport { router } from './components/router.js';\nimport {\n  RouterProvider,\n} from 'react-router-dom'\n\nimport { Provider as ReduxProvider } from 'react-redux'\nimport store from './redux/store.js'\n\n// import reportWebVitals from './reportWebVitals';\n\n// check if domain is 0.0.0.0\nconst isLocalhost = Boolean(\n  window.location.hostname === '0.0.0.0' ||\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]'\n)\n\nwindow.env = isLocalhost === true ? 'dev' : 'prod'\nwindow.urls = {\n  frontend: 'https://money.thomasrosen.me/',\n  api: 'https://money.thomasrosen.me/api/',\n}\nif (window.env === 'dev') {\n  const dev_domain = 'localhost' // 0.0.0.0\n  window.urls.frontend = `http://${dev_domain}:3000/`\n  window.urls.api = `http://${dev_domain}:13151/api/`\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <ReduxProvider store={store}>\n      <RouterProvider\n        router={router}\n        fallbackElement=\"Loading‚Ä¶\"\n      />\n    </ReduxProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}