{"version":3,"sources":["functions.js","components/Tag.js","redux/slices/filterSlice.js","redux/slices/resourcesSlice.js","components/Filters.js","components/App.js","components/pages/welcome.js","components/router.js","redux/store.js","index.js"],"names":["luma","color","rgb","startsWith","substring","length","charAt","Error","i","parseInt","substr","hexToRGBArray","module","exports","getContrastingColorFromHex","string2color","str","hash","charCodeAt","toString","Tag","_ref","tag","style","props","_objectWithoutProperties","_excluded","textColor","_jsx","_objectSpread","backgroundColor","children","pushReplaceSearchParams","new_searchParams","url","URL","window","location","old_search_params_string","searchParams","new_search_params_string","URLSearchParams","concat","_toConsumableArray","Array","from","entries","filter","key","_slicedToArray","has","_ref3","value","String","sort","_ref5","_ref6","key_a","key_b","localeCompare","origin","pathname","history","pushState","filterSlice","createSlice","name","initialState","tags","selectedTags","queryText","latitude","longitude","reducers","setTags","state","action","payload","setSelectedTags","toggleTag","includes","push","Boolean","join","setQueryText","setGeoLocation","clearGeoLocation","_filterSlice$actions","actions","selectTags","selectSelectedTags","selectQueryText","selectGeoLocation","resourcesSlice","resources","setResources","fetchResources","createAsyncThunk","_asyncToGenerator","_regeneratorRuntime","mark","_callee","thunkApi","_ref2","dispatch","getState","_getState","search_params_data","filtered_selectedTags","search_params","wrap","_context","prev","next","console","log","lat","lon","isArray","q","urls","api","fetch","then","response","json","data","stop","_x","_x2","apply","arguments","selectResources","Filters","_ref$onError","onError","useDispatch","useSelector","_useSelector","loadResources","React","useCallback","loadTags","current_url","get","getLocation","navigator","geolocation","getCurrentPosition","position","coords","error","message","clearLocation","thisToggleTag","queryTextChanged","event","target","useEffect","reload","selected_tags","split","new_query_text","addEventListener","removeEventListener","_jsxs","className","onClick","map","margin","type","placeholder","defaultValue","onChange","App","_React$useState","useState","_React$useState2","showFilters","setShowFilters","_React$useState3","_React$useState4","setError","toggleFilters","href","rel","resource","link","title","description","JSON","stringify","Outlet","Welcome","router","createHashRouter","path","element","configureStore","reducer","filterReducer","resourcesReducer","isLocalhost","hostname","env","frontend","dev_domain","ReactDOM","render","StrictMode","ReduxProvider","store","RouterProvider","fallbackElement","document","getElementById"],"mappings":"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","file":"static/js/main.2825340d.chunk.js","sourcesContent":["function hexToRGBArray(color) {\n  if (color.startsWith('#')) {\n    color = color.substring(1)\n  }\n\n  if (color.length === 3) {\n    color = color.charAt(0) + color.charAt(0) + color.charAt(1) + color.charAt(1) + color.charAt(2) + color.charAt(2);\n  } else if (color.length !== 6) {\n    throw (new Error('Invalid hex color: ' + color));\n  }\n\n  let rgb = [];\n  for (var i = 0; i <= 2; i++) {\n    rgb[i] = parseInt(color.substr(i * 2, 2), 16);\n  }\n\n  return rgb;\n}\nfunction luma(color) {\n  // color can be a hex string or an array of RGB values 0-255\n  const rgb = (typeof color === 'string') ? hexToRGBArray(color) : color;\n  return (0.2126 * rgb[0]) + (0.7152 * rgb[1]) + (0.0722 * rgb[2]); // SMPTE C, Rec. 709 weightings\n}\nfunction getContrastingColorFromHex(color) {\n  // source: https://stackoverflow.com/questions/635022/calculating-contrasting-colours-in-javascript\n  // exact answer: https://stackoverflow.com/a/6511606/2387277\n  // example: https://jsfiddle.net/thomasrosen/9njo6t7s/20/\n\n  return (luma(color) >= 165) ? '#000' : '#fff';\n}\n\nfunction string2color(str) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = '#';\n  for (let i = 0; i < 3; i++) {\n    let value = (hash >> (i * 8)) & 0xFF;\n    color += ('00' + value.toString(16)).substr(-2);\n  }\n  return color;\n}\n\nmodule.exports = {\n  getContrastingColorFromHex,\n  string2color,\n};\n","import React from 'react'\n\nimport {\n  getContrastingColorFromHex,\n  string2color,\n} from '../functions.js'\n\nexport default function Tag({ tag, style, ...props }) {\n  const color = string2color(tag) // TODO make sure to only run this once\n  // TODO define the colors instead of generating them\n  const textColor = getContrastingColorFromHex(color) // TODO make sure to only run this once\n\n  return <button\n    {...props}\n    style={{\n      ...style,\n      backgroundColor: color,\n      color: textColor,\n    }}\n  >\n    {tag}\n  </button>\n}\n","import { createSlice } from '@reduxjs/toolkit'\n\nfunction pushReplaceSearchParams(new_searchParams) {\n  let url = new URL(window.location)\n\n  const old_search_params_string = url.searchParams.toString()\n\n  const new_search_params_string = new URLSearchParams(\n    [\n      ...(\n        Array.from(url.searchParams.entries())\n          .filter(([key]) => !new_searchParams.has(key))\n      ),\n      ...(\n        [...new_searchParams.entries()]\n          .filter(([, value]) => String(value).length > 0)\n      ),\n    ]\n      .sort(([key_a], [key_b]) => key_a.localeCompare(key_b)) // sort alphabetically\n  ).toString()\n\n  if (old_search_params_string !== new_search_params_string) {\n    url = new URL(`${url.origin}${url.pathname}${new_search_params_string.length > 0 ? '?' + new_search_params_string : ''}`)\n    window.history.pushState({}, '', url)\n  }\n}\n\nexport const filterSlice = createSlice({\n  name: 'filter',\n  initialState: {\n    tags: [],\n    selectedTags: [],\n    queryText: '',\n    latitude: 0,\n    longitude: 0,\n  },\n  reducers: {\n    setTags: (state, action) => {\n      state.tags = action.payload\n    },\n    setSelectedTags: (state, action) => {\n      state.selectedTags = action.payload\n    },\n    toggleTag: (state, action) => {\n      if (state.selectedTags.includes(action.payload)) {\n        state.selectedTags = state.selectedTags.filter(tag => tag !== action.payload)\n      } else {\n        state.selectedTags.push(action.payload)\n      }\n\n      state.selectedTags = state.selectedTags.filter(Boolean)\n\n      if (state.selectedTags.length === 0) {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['tags', ''],\n        ]))\n      } else {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['tags', state.selectedTags.join(',')],\n        ]))\n      }\n    },\n    setQueryText: (state, action) => {\n      state.queryText = action.payload\n\n      if (state.queryText.length === 0) {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['q', ''],\n        ]))\n      } else {\n        pushReplaceSearchParams(new URLSearchParams([\n          ['q', state.queryText],\n        ]))\n      }\n    },\n    setGeoLocation: (state, action) => {\n      state.latitude = action.payload.latitude\n      state.longitude = action.payload.longitude\n\n      pushReplaceSearchParams(new URLSearchParams([\n        ['lat', state.latitude],\n        ['lon', state.longitude],\n      ]))\n    },\n    clearGeoLocation: (state) => {\n      state.latitude = null\n      state.longitude = null\n\n      pushReplaceSearchParams(new URLSearchParams([\n        ['lat', ''],\n        ['lon', ''],\n      ]))\n    }\n  }\n})\n\nexport const {\n  setTags,\n  setSelectedTags,\n  toggleTag,\n  setQueryText,\n  setGeoLocation,\n  clearGeoLocation,\n} = filterSlice.actions\n\nexport const selectTags = state => state.filter.tags\nexport const selectSelectedTags = state => state.filter.selectedTags.filter(Boolean)\nexport const selectQueryText = state => state.filter.queryText\nexport const selectGeoLocation = state => ({\n  latitude: state.filter.latitude,\n  longitude: state.filter.longitude,\n})\n\nexport default filterSlice.reducer\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\n\nexport const resourcesSlice = createSlice({\n  name: 'resources',\n  initialState: {\n    resources: [],\n  },\n  reducers: {\n    setResources: (state, action) => {\n      state.resources = action.payload\n    },\n  }\n})\n\nexport const {\n  setResources,\n} = resourcesSlice.actions\n\nexport const fetchResources = createAsyncThunk('resources/fetchResources', async (value, thunkApi) => {\n  console.log('fetchResources')\n  const {\n    dispatch,\n    getState,\n  } = thunkApi || {}\n\n  const { filter } = getState()\n\n  const {\n    latitude,\n    longitude,\n    selectedTags,\n    queryText,\n  } = filter || {}\n\n  const search_params_data = {}\n\n  if (\n    latitude !== null && String(latitude).length > 0\n    && longitude !== null && String(longitude).length > 0\n  ) {\n    search_params_data.lat = latitude\n    search_params_data.lon = longitude\n  }\n\n  const filtered_selectedTags = selectedTags.filter(Boolean)\n  if (Array.isArray(filtered_selectedTags) && filtered_selectedTags.length > 0) {\n    search_params_data.tags = filtered_selectedTags.join(',')\n  }\n\n  if (typeof queryText === 'string' && queryText.length > 0) {\n    search_params_data.q = queryText\n  }\n\n  const search_params = new URLSearchParams(search_params_data).toString()\n\n  const url = `${window.urls.api}resources.json${search_params.length > 0 ? '?' + search_params : ''}`;\n\n  console.log('url', url)\n\n  fetch(url)\n    .then(response => response.json())\n    .then(data => {\n      console.log('data', data)\n      dispatch(setResources(data.resources))\n    })\n})\n\nexport const selectResources = state => state.resources.resources\n\nexport default resourcesSlice.reducer\n","import React from 'react'\nimport './App.css'\n\nimport '../fonts/ubuntu-v15-latin/index.css'\nimport '../fonts/ubuntu-mono-v10-latin/index.css'\n\nimport Tag from './Tag.js'\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  setTags,\n  setSelectedTags,\n  toggleTag,\n  setQueryText,\n  setGeoLocation,\n  clearGeoLocation,\n\n  selectTags,\n  selectSelectedTags,\n  selectQueryText,\n  selectGeoLocation,\n} from '../redux/slices/filterSlice.js'\nimport {\n  fetchResources,\n  selectResources,\n} from '../redux/slices/resourcesSlice.js'\n\nexport default function Filters({\n  onError = () => { },\n}) {\n  const dispatch = useDispatch()\n\n  const tags = useSelector(selectTags)\n  const selectedTags = useSelector(selectSelectedTags)\n  const queryText = useSelector(selectQueryText)\n  const { latitude, longitude } = useSelector(selectGeoLocation)\n\n  const resources = useSelector(selectResources)\n\n  const loadResources = React.useCallback(() => {\n    dispatch(fetchResources())\n  }, [dispatch])\n\n  const loadTags = React.useCallback(() => {\n\n    const current_url = new URL(window.location);\n    const latitude = (current_url.searchParams.get('lat') || '')\n    const longitude = (current_url.searchParams.get('lon') || '')\n\n    const search_params_data = {}\n\n    if (\n      typeof latitude === 'string' && latitude.length > 0 &&\n      typeof longitude === 'string' && longitude.length > 0\n    ) {\n      search_params_data.lat = latitude\n      search_params_data.lon = longitude\n    }\n\n    const search_params = new URLSearchParams(search_params_data).toString()\n\n    const url = `${window.urls.api}tags.json${search_params.length > 0 ? '?' + search_params : ''}`;\n\n    fetch(url)\n      .then((response) => response.json())\n      .then((data) => {\n        dispatch(setTags(data.tags))\n        loadResources()\n      })\n\n  }, [dispatch, loadResources])\n\n  const getLocation = React.useCallback(() => {\n\n    // dispatch(setGeoLocation({\n    //   latitude: 48.1351253,\n    //   longitude: 11.5819806,\n    // }))\n\n    // loadTags()\n    // loadResources()\n\n    // onError('')\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        onError('')\n\n        dispatch(setGeoLocation({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n        }))\n\n        loadTags()\n        loadResources()\n      }, (error) => {\n        onError(error.message)\n      })\n    } else {\n      onError('Geolocation is not supported by this browser.')\n    }\n  }, [dispatch, onError, loadTags, loadResources])\n\n  const clearLocation = React.useCallback(() => {\n    dispatch(clearGeoLocation())\n    loadTags()\n    loadResources()\n  }, [dispatch, loadTags, loadResources])\n\n  const thisToggleTag = React.useCallback(tag => {\n    dispatch(toggleTag(tag))\n    loadResources()\n  }, [dispatch, loadResources])\n\n  const queryTextChanged = React.useCallback(event => {\n    if (event) {\n      dispatch(setQueryText(event.target.value))\n      loadResources()\n    }\n  }, [dispatch, loadResources])\n\n  React.useEffect(() => {\n\n    function reload() {\n      const current_url = new URL(window.location);\n\n      const latitude = (current_url.searchParams.get('lat') || '')\n      const longitude = (current_url.searchParams.get('lon') || '')\n      dispatch(setGeoLocation({ latitude, longitude }))\n\n      const selected_tags = (current_url.searchParams.get('tags') || '').split(',')\n      dispatch(setSelectedTags(selected_tags))\n\n      const new_query_text = current_url.searchParams.get('q') || ''\n      dispatch(setQueryText(new_query_text))\n\n      loadResources()\n    }\n    reload()\n    window.addEventListener('popstate', reload)\n\n    return () => {\n      window.removeEventListener('popstate', reload)\n    }\n  }, [dispatch, loadResources])\n\n  React.useEffect(() => {\n    loadTags()\n  }, [loadTags, latitude, longitude])\n\n  return <div>\n    <h2>Filter for resources in near you:</h2>\n    <div className=\"tag_row\">\n      <button onClick={getLocation}>Get my Location</button>\n      {\n        latitude && longitude\n          ? <button onClick={clearLocation}>Clear Location</button>\n          : null\n      }\n    </div>\n    {\n      latitude && longitude\n        ? <p>Your Location: {latitude} / {longitude}</p>\n        : null\n    }\n\n    <br />\n    <h2>Filter by tag:</h2>\n    <div className=\"tag_row\">\n      {tags && tags.map(tag => {\n        return <Tag\n          key={tag}\n          tag={tag}\n          data-selected={selectedTags.includes(tag) ? 'true' : 'false'}\n          onClick={() => thisToggleTag(tag)}\n        />\n      })}\n    </div>\n\n    <br />\n    <h2>Search:</h2>\n    <input\n      style={{ margin: '20px 0' }}\n      type=\"search\"\n      placeholder=\"Search‚Ä¶\"\n      defaultValue={queryText}\n      onChange={queryTextChanged}\n    />\n\n    <br />\n    <br />\n    <h2>Result Summary:</h2>\n    <br />\n    {\n      resources.length === 0\n        ? <p>No resources found.</p>\n        : null\n    }\n    {\n      resources.length === 1\n        ? <p>One resources found.</p>\n        : null\n    }\n    {\n      resources.length > 1\n        ? <p>{resources.length} resources found.</p>\n        : null\n    }\n\n  </div>\n}\n","import React from 'react'\nimport './App.css'\n\nimport '../fonts/ubuntu-v15-latin/index.css'\nimport '../fonts/ubuntu-mono-v10-latin/index.css'\n\nimport {\n  Outlet,\n} from 'react-router-dom'\n\nimport Tag from './Tag.js'\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n  toggleTag,\n  \n  selectSelectedTags,\n} from '../redux/slices/filterSlice.js'\nimport {\n  fetchResources,\n  selectResources,\n} from '../redux/slices/resourcesSlice.js'\n\nimport Filters from './Filters.js'\n\nexport default function App() {\n\n  const dispatch = useDispatch()\n\n  const resources = useSelector(selectResources)\n  const selectedTags = useSelector(selectSelectedTags)\n\n  const thisToggleTag = React.useCallback(tag => {\n    dispatch(toggleTag(tag))\n    dispatch(fetchResources())\n  }, [dispatch])\n\n  const [showFilters, setShowFilters] = React.useState(false)\n\n  const [error, setError] = React.useState(null)\n  \n  const toggleFilters = () => {\n    setShowFilters(showFilters => !showFilters)\n  }\n\n  return <div className={`app_wrapper ${showFilters === true ? 'show_filters' : 'hide_filters'}`}>\n    <header>\n\n      {\n        showFilters === true\n          ? <button\n            className=\"hide_on_large_screens\"\n            onClick={toggleFilters}\n          >\n            Close Filters\n          </button>\n          : null\n      }\n\n      <h1>üè≥Ô∏è‚Äçüåà QR</h1>\n\n      <a href=\"https://github.com/thomasrosen/queer\" target=\"_blank\" rel=\"noreferrer\">Sourcecode</a>\n    </header>\n\n    <nav>\n      <Filters\n        onError={setError}\n        />\n    </nav>\n    \n    <main>\n      <h1>üè≥Ô∏è‚Äçüåà Queer Resources</h1>\n\n      <br />\n\n      <p>A collection of resources for queer people. You're of course also welcome to look through the information if you are an ally.</p>\n\n      <p>You can filter the links via your location and some tags.</p>\n\n      <p>\n        The website is maintained by <a href=\"https://thomasrosen.me/\" target=\"_blank\" rel=\"noreferrer\">Thomas Rosen</a>.<br />\n        Send an email to <a href=\"mailto:queer@thomasrosen.me\">queer@thomasrosen.me</a> if you want to add a resource.\n      </p>\n\n      <div className=\"hide_on_large_screens\">\n        <br />\n        <button\n          onClick={toggleFilters}\n        >\n          {showFilters === true ? 'Close Filters' : 'Open Filters'}\n        </button>\n        <br />\n      </div>\n\n      <br />\n      <br />\n\n      {error && <p>Error: {error}</p>}\n\n      {\n        resources &&\n        resources.map(resource => {\n          return <div key={JSON.stringify(resource)}>\n            <h3>\n              <a href={resource.link} target=\"_blank\" rel=\"noreferrer\">\n                {resource.title}\n              </a>\n            </h3>\n            {\n              !!resource.description && resource.description.length > 0\n                ? <p>{resource.description}</p>\n                : null\n            }\n            <div className=\"tag_row small\">\n              {\n                resource.tags.map(tag => {\n                  return <Tag\n                    className=\"small\"\n                    key={tag}\n                    tag={tag}\n                    data-selected={selectedTags.includes(tag) ? 'true' : 'false'}\n                    onClick={() => thisToggleTag(tag)}\n                  />\n                })\n              }\n            </div>\n            <br />\n          </div>\n        })\n      }\n      {\n        resources && resources.length === 0\n          ? <p>No resources found.</p>\n          : null\n      }\n      {\n        !resources\n          ? <p>Loading...</p>\n          : null\n      }\n\n      <Outlet />\n    </main>\n\n  </div>\n}\n","export default function Welcome() {\n  return <div>\n      \n  </div>\n}\n","import {\n  createHashRouter,\n} from 'react-router-dom'\n\nimport App from './App.js'\nimport Welcome from './pages/welcome.js'\n\nexport const router = createHashRouter([\n  {\n    path: '/',\n    element: <App />,\n    children: [\n      {\n        path: '/',\n        element: <Welcome />,\n      },\n      {\n        path: '*',\n        element: <Welcome />,\n      },\n    ]\n  },\n]);\n","import { configureStore } from '@reduxjs/toolkit'\nimport filterReducer from './slices/filterSlice.js'\nimport resourcesReducer from './slices/resourcesSlice.js'\n\nexport default configureStore({\n  reducer: {\n    filter: filterReducer,\n    resources: resourcesReducer,\n  }\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nimport { router } from './components/router.js';\nimport {\n  RouterProvider,\n} from 'react-router-dom'\n\nimport { Provider as ReduxProvider } from 'react-redux'\nimport store from './redux/store.js'\n\n// import reportWebVitals from './reportWebVitals';\n\n// check if domain is 0.0.0.0\nconst isLocalhost = Boolean(\n  window.location.hostname === '0.0.0.0' ||\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]'\n)\n\nwindow.env = isLocalhost === true ? 'dev' : 'prod'\nwindow.urls = {\n  frontend: 'https://money.thomasrosen.me/',\n  api: 'https://money.thomasrosen.me/api/',\n}\nif (window.env === 'dev') {\n  const dev_domain = 'localhost' // 0.0.0.0\n  window.urls.frontend = `http://${dev_domain}:3000/`\n  window.urls.api = `http://${dev_domain}:13151/api/`\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <ReduxProvider store={store}>\n      <RouterProvider\n        router={router}\n        fallbackElement=\"Loading‚Ä¶\"\n      />\n    </ReduxProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}